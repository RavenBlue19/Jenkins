pipeline {
    agent any
    environment {
        DIRECTORY_PATH = "/SIT223/Jenkins"
        TESTING_ENVIRONMENT = "SIT223"
        PRODUCTION_ENVIRONMENT = "Sam"
    }
    stages {
        stage('build') {
            steps {
                echo "Fetching the source code from $DIRECTORY_PATH"
                echo "Compiling the code and generating any necessary artifacts"
            }
            post {
                success {
                    script {
                        emailext(
                            to: 'safifi19@gmail.com',
                            subject: "Build Status: Successful",
                            body: "The build was successful."
                        )
                    }
                }
            }
        }
        stage('test') {
            steps {
                echo "Running unit tests"
                echo "Running integration tests"
            }
        }
        stage('code quality check') {
            steps {
                echo "Checking the quality of the code"
            }
        }
        stage('deploy') {
            steps {
                echo "Deploying the application to the testing environment: $TESTING_ENVIRONMENT"
            }
        }
        stage('approval') {
            steps {
                input message: "Do you approve the deployment to production?"
            }
        }
        stage('deploy to production') {
            steps {
                echo "Deploying to production environment: $PRODUCTION_ENVIRONMENT"
            }
        }
    }
}
